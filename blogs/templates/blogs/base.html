<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{%block title%}{% endblock %} | Blogdom</title>
    {% load static %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Monoton|Alegreya|Oleo+Script" rel="stylesheet">
    <style>
        body{
            background-color: #ffffff;
        }
        img{
            border:1px solid #021a40;
            border-radius: 10px;
            box-shadow: 10px 10px 10px 10px #f2f2f2;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top ">
  <div class="container-fluid">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
        <a class="navbar-brand" href="{% url 'index' %}">BLOGDOM</a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
            {% if not request.user.is_anonymous %}
            <li class = "dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" href = "#" >
                   <!--href="{% url 'user_profile' request.user %}">-->
                    <span class="glyphicon glyphicon-user">
                    </span>&nbsp;{{request.user}}
                <span class="caret"></span></a>
                <ul class="dropdown-menu">
                     <li class="divider"></li>
                     <li><a href="{% url 'user_profile' request.user %}">{{request.user.profile.first_name}} {{request.user.profile.last_name}}</a></li>
                     <li class="divider"></li>
                    <li><a data-toggle="modal" data-target="#myModal" href = "" >Delete Account</a></li>
                    <li><a href="{% url 'user_profile_edit' %}">Edit Profile</a></li>
                    <li><a href = "{% url 'logout' %}">LogOut</a></li>
                </ul>
            </li>

            {% else %}
              <li>
                  <a href="{% url 'login' %}"><span class="glyphicon glyphicon-log-in"></span>&nbsp;Login</a>
              </li>
                <li>
                    <a href="{% url 'signup' %}"><span class="glyphicon glyphicon-user"></span>&nbsp;Sign Up</a>
                </li>
            {% endif %}
        </ul>
  </div>
  </div>
</nav>
<br/>
<br/>
<div class="modal" id="myModal" role="dialog">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Confirm Account Deletion</h4>
            </div>
            <div class="modal-body">
                <p><strong>Are you sure you want to delete your account and all its related information ? </strong></p>
            </div>
            <div class="modal-footer">
                <a class="btn btn-default"  href="{% url 'deleteUser' %}" >Yes</a>
                <a class="btn btn-default" data-dismiss="modal">No</a>
            </div>
        </div>
    </div>
</div>
{% block content %}
{% endblock %}
<script>
    function upvotes_ajax(id) {
    {% if not request.user.is_anonymous %}
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
            document.getElementById(id).innerHTML = xhttp.responseText;
        }
    };
    xhttp.open("GET", "blogs/upvote/"+id, true);
    xhttp.send();
{% else %}
location.href = "{% url 'login' %}";
{% endif %}
}
function content(postid)
{
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (xhttp.readyState == 4 && xhttp.status == 200) {
        document.getElementById("more"+postid).innerHTML = xhttp.responseText;
         }
    };
    xhttp.open("GET", "/blogs/content/"+postid, true);
    xhttp.send();
}
</script>

<script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type = "text/javascript" src = "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>